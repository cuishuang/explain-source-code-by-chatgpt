# File: text/cmd/gotext/extract.go

在Go的text项目中，`text/cmd/gotext/extract.go`文件的主要作用是从源代码中提取出待翻译的字符串，并生成相应的消息目录文件（`.po`文件）。以下是对`extract.go`文件的详细介绍：

- `cmdExtract`变量：该变量是一个结构体类型，用于存储提取操作的相关配置信息和状态。其中包含以下字段：
  - `outputDir`：指定生成的消息目录文件（`.po`文件）的输出目录。
  - `funcExp`：函数表达式，用于匹配待提取的函数调用。
  - `filePatterns`：需要扫描的源代码文件的模式，可以使用通配符指定多个文件或目录。
  - `extracted`：存储已提取的消息。
  - `makeTarget`：要生成的目标消息目录文件（`.po`文件）的名称。

- `initExtract`函数：该函数是`cmdExtract`变量的初始化函数，用于设置提取操作的默认配置。

- `runExtract`函数：该函数是提取操作的主函数。它按照指定的配置信息，扫描源代码文件并提取出待翻译的字符串。主要包含以下步骤：
  1. 遍历指定的源代码文件。
  2. 通过正则表达式匹配待提取的函数调用，并提取出字符串参数。
  3. 将提取的字符串存储到`cmdExtract.extracted`中。
  4. 根据提取的字符串生成消息目录文件（`.po`文件）并保存到指定的输出目录。

总结来说，`extract.go`文件中的`cmdExtract`变量存储了提取操作的配置信息，`initExtract`函数用于初始化配置，`runExtract`函数执行提取操作并生成消息目录文件。

这些组件的作用是为了方便开发者在编写多语言应用时，能够自动提取待翻译的字符串，并生成相应的消息目录文件，以便后续的翻译工作。

